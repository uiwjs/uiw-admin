{"version":3,"file":"static/js/695.d53cd02c.chunk.js","mappings":"8GACA,WACIA,WAAY,CAAG,EACfC,KAAM,CAAC,EACPC,OAAQ,6mO","sources":["pages/request/README.md"],"sourcesContent":["\nexport default {\n    components: {  },\n    data: {},\n    source: \"# ç½‘ç»œè¯·æ±‚\\n\\nå¯¹äºä¸­åå°åº”ç”¨æ¥è¯´ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œå°±åœ¨äºè¯·æ±‚åç«¯çš„ CRUD çš„æ¥å£ï¼Œä¸ºè¿›ä¸€æ­¥é™ä½ç”¨æˆ·å¯¹è¯·æ±‚å±‚çš„æ„ŸçŸ¥ï¼Œæˆ‘ä»¬é›†æˆäº†æ¥å£è¯·æ±‚æ–¹æ¡ˆã€‚åŒæ—¶é€šè¿‡ä¸šåŠ¡æ€»ç»“å‡ºä¸€å¥—æ ‡å‡†çš„æ¥å£ç»“æ„è§„èŒƒï¼Œå¹¶æä¾›ç»Ÿä¸€çš„æ¥å£è§£æã€é”™è¯¯å¤„ç†çš„èƒ½åŠ›ã€‚\\n\\n## @kkt/request\\n\\nkktå†…ç½®è¯·æ±‚æ–¹æ¡ˆã€‚é…ç½® `queryClient`å¼€å¯ã€‚ `@kkt/request` å†…ç½®äº† `react-query`ï¼ˆå’Œ [`@tanstack/react-query`](https://npmjs.com/@tanstack/react-query)<!--rehype:target=__blank--> æ˜¯åŒä¸€ä¸ªï¼‰è¯·æ±‚æ–¹æ¡ˆã€‚æ›´å¤š API æ–¹æ³•è¯·æŸ¥çœ‹ [react-query å®˜æ–¹æ–‡æ¡£](https://tanstack.com/query/latest)ã€‚\\n\\n**`kktp`é…ç½®æ–‡ä»¶**\\n\\n```ts\\n// .kktprc.ts\\nexport default {\\n  queryClient: true\\n}\\n```\\n\\n```js\\nimport { useReactQuery, useReactMutation, queryClient, fetchFn } from '@kkt/request';\\n// OR\\nimport { useReactQuery, useReactMutation, queryClient, fetchFn } from '@kkt/pro';\\n```\\n\\n**useReactQuery**\\n\\nä¸»è¦ç”¨äº**é»˜è®¤**è§¦å‘è¯·æ±‚æ•°æ®ï¼Œé»˜è®¤ `GET` è¯·æ±‚ï¼Œå˜æ›´ä½¿ç”¨ `method=\\\"POST\\\"` å‚æ•°é…ç½®\\n\\n```jsx\\nuseReactQuery({ \\n  queryKey: ['user', userId], \\n  url: `/api/user/list?id=${userId}`\\n});\\n```\\n<!--rehype:style=background:#00de2247;border: 0;-->\\n\\nğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘† ä¸Šé¢æ˜¯**æ¨è**ä½¿ç”¨ ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†ğŸ‘†\\n\\n```jsx\\nimport { fetchFn, useReactQuery } from '@kkt/request';\\n\\nuseReactQuery({ queryKey: ['user'], url: '/api/user/list' });\\nuseReactQuery({ queryKey: ['user'], url: '/api/user/list', method: 'POST' });\\nuseReactQuery({ queryKey: ['user', userId], queryFn: () => fetchFn(`/api/user/list?id=${userId}`) });\\nuseReactQuery({\\n  queryKey: ['user', userId],\\n  queryFn: async () => {\\n    return fetchFn(`/api/user/list?id=${userId}`);\\n  },\\n});\\nuseReactQuery({\\n  queryKey: ['user', userId],\\n  queryFn: ({ queryKey }) => fetchFn(`/api/user/list?id=${queryKey[1]}`);,\\n});\\nuseReactQuery({\\n  queryKey: ['user'],\\n  url: '/api/user/list',\\n  initialData: [....],\\n});\\n\\nconst { isInitialLoading, isError, data, error, refetch, isFetching } = useQuery(...)\\n```\\n\\nç¤ºä¾‹\\n\\n```javascript\\nimport { useReactQuery } from '@kkt/request';\\n\\nexport default function HomePage() {\\n  const { isLoading, isError, data } = useReactQuery({\\n    url: `/api/user/list`,\\n    queryKey: ['user-list'],\\n  });\\n\\n  return (\\n    <div>\\n      <p className=\\\"title\\\">x react-query</p>\\n      {isError && <p>è¯·æ±‚ API é”™è¯¯ ...</p>}\\n      {isLoading && <p>Loading ...</p>}\\n      {data && <p>ç°åœ¨æœ‰ {data.stargazers_count} é¢—æ˜Ÿï¼</p>}\\n    </div>\\n  );\\n}\\n```\\n\\næ›´å¤šå‚æ•°åŠå®ä¾‹æ‰è€ƒ[@kkt/request](https://kktjs.github.io/kkt-pro/#/doc/request)\\n\\n## request\\n\\n`@uiw-admin/utils` å†…ç½®`request`æ–¹æ³•ã€‚ç³»ç»Ÿçš„è¯·æ±‚åŸºäºaxiosè¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼Œå‚è§[axios](https://axios-http.com/)\\n\\n```js\\nimport { request } from \\\"@uiw-admin/utils\\\"\\n```\\n\\n**æ–¹æ³•**\\nåŸºäºrestfulè§„èŒƒï¼Œæä¾›äº†2ä¸ªæ–¹æ³•ï¼š\\n- get è·å–æœåŠ¡ç«¯æ•°æ®ï¼Œå‚æ•°æ‹¼æ¥åœ¨urlä¸Šï¼Œä»¥ query string æ–¹å¼å‘é€ç»™åç«¯\\n- post æ–°å¢æ•°æ®ï¼Œå‚æ•°ä»¥bodyå½¢å¼å‘é€ç»™åç«¯\\n\\n\\n**å‚æ•°**\\n\\n| å‚æ•°    | è¯´æ˜     | ç±»å‹           | é»˜è®¤å€¼ |\\n| :------ | :------- | :------------- | :----- |\\n| url | è¯·æ±‚åœ°å€ | string        | -      |\\n| options   | è¯·æ±‚é…ç½®ï¼Œå³axiosçš„é…ç½®ï¼Œ     | Options         | -     |\\n\\n**Options**\\n| å‚æ•°    | è¯´æ˜     | ç±»å‹           | é»˜è®¤å€¼ |\\n| :------ | :------- | :------------- | :----- |\\n| body | è¯·æ±‚ä¼ é€’ç»™åç«¯çš„å‚æ•° | any      | -      |\\n| requestType   | æ•°æ®æ ¼å¼    | 'form' æˆ– 'json' æˆ– 'urlencoded'        | -     |\\n\\n**è°ƒç”¨æ–¹å¼**\\n\\n**âœ¨é…å’Œswrè°ƒç”¨**\\n> å¦‚æœå·²å…¨å±€é…ç½®è¿‡swr,å¯ä¸ç”¨ä¼ å…¥request\\n\\n```tsx\\nimport React from 'react'\\nimport useSWR from 'swr';\\nimport { request } from \\\"@uiw-admin/utils\\\"\\n\\nexport default const Index = () => {\\n  const [ name ,setName ] = React.useState('')\\n  const { mutate } = useSWR(\\n    ['/api/selectById',{ method: 'POST', body: {id:1} }],\\n    request,\\n    {\\n      revalidateOnMount: false,\\n      revalidateOnFocus: false,\\n      onSuccess: (data) => {\\n        if (data && data.code === 200) {\\n          setName(data.data)\\n         }\\n      },\\n    }\\n  )\\n\\n  React.useEffect(()=>mutate(false),[mutate])\\n\\n  return <div>{name}</div>\\n}\\n\\n```\\n**åœ¨rematchä¸­ä½¿ç”¨**\\n\\n> åœ¨servers/index.jsä¸­\\n```ts\\nimport { request } from \\\"@uiw-admin/utils\\\"\\n\\nexport const selectById  = (params:{id:string}) => request(\\\"/api/selectById\\\",{ method:\\\"POST\\\",body: { ...params } })\\n\\n```\\n> åœ¨model/index.tsä¸­\\n```ts\\nimport { RootModel, createModel } from '@kkt/pro';\\nimport { selectById } from '../servers';\\n\\nconst index = createModel<RootModel>()({\\n  name: 'index',\\n  state: {\\n    name:''\\n  },\\n  reducers: {\\n    updateState: (state: any, payload: any) => ({\\n      ...state,\\n      ...payload,\\n    }),\\n  },\\n  effects: (dispatch) => ({\\n    async selectById(payload: {id:string}) {\\n      const dph = dispatch\\n      const data = await selectById(payload)\\n      if (data.code === 200) {\\n        dph.index.dispatch({\\n          type:\\\"updateState\\\",\\n          payload:{\\n            name:data.data || ''\\n          }\\n        })\\n      }\\n    },\\n  }),\\n})\\nexport default index\\n\\n```\\n\\n> åœ¨é¡µé¢ä¸­è°ƒç”¨\\n```tsx\\nimport React from 'react';\\nimport { useDispatch, useSelector, RootState, Dispatch } from '@kkt/pro';\\n\\nexport default const Index = () => {\\n  const dispatch = useDispatch<Dispatch>()\\n  const stores = useSelector((state: RootState) => state) || {}\\n  const { index:{ name } } = stores\\n  React.useEffect(()=>{\\n     dispatch({\\n      type: 'index/selectById',\\n      payload:{id:1},\\n    })\\n  },[])\\n  return <div>{name}</div>\\n}\\n\\n```\\n\\n## â¤ï¸è´¡çŒ®è€…\\n\\næ„Ÿè°¢æ‰€æœ‰çš„è´¡çŒ®è€…ï¼Œæ¬¢è¿å¼€å‘è€…ä¸ºå¼€æºé¡¹ç›®è´¡çŒ®åŠ›é‡ã€‚\\n\\n<a href=\\\"https://github.com/uiwjs/uiw-admin/graphs/contributors\\\">\\n  <img src=\\\"https://uiwjs.github.io/uiw-admin/CONTRIBUTORS.svg\\\" />\\n</a>\\n\\n## License\\n\\nLicensed under the MIT License.\"\n  }"],"names":["components","data","source"],"sourceRoot":""}