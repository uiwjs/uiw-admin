{"version":3,"file":"static/js/200.db6cbf0c.chunk.js","mappings":"6GACA,WACIA,WAAY,CAAG,EACfC,KAAM,CAAC,EACPC,OAAQ,+1U","sources":["pages/proxy/README.md"],"sourcesContent":["\nexport default {\n    components: {  },\n    data: {},\n    source: \"# ä»£ç†\\nåœ¨å‰åç«¯åˆ†ç¦»çš„ä»Šå¤©ï¼Œè·¨åŸŸä¹Ÿæˆäº†æ¯ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆéƒ½éœ€è¦äº†è§£çš„åŸºæœ¬çŸ¥è¯†ï¼Œåœ¨å„ç§é¢è¯•é¢˜ä¸­çš„æ—¥ç»è¯é¢˜ã€‚è¿™ä¸ªæ–‡ç« å°±æ˜¯æƒ³æ€»ç»“ä¸€ä¸‹å…³äºåŒæºç­–ç•¥çš„å‰ä¸–ä»Šç”Ÿï¼Œä»¥åŠæ€ä¹ˆè§£å†³å®ƒã€‚\\n\\n## åŒæºç­–ç•¥\\nåœ¨[MDN](https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy)ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…³äºåŒæºç­–ç•¥æ˜¯ä¸€ä¸ªå®‰å…¨æœºåˆ¶ã€‚è¯¦ç»†çš„è¯´æ˜å¦‚ä¸‹ï¼š\\n\\n```bash\\nåŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚\\n```\\nè¿™ä¸ªæœºåˆ¶æœ¬èº«å‡ºå‘ç‚¹æ˜¯å¾ˆå¥½çš„ï¼Œä½†æ˜¯åŒæºçš„é™åˆ¶éå¸¸ä¸¥æ ¼ï¼Œurlï¼Œç«¯å£ä»»ä¸€ä¸åŒéƒ½ä¼šé€ æˆè·¨åŸŸé”™è¯¯ã€‚\\n![](https://user-images.githubusercontent.com/59959718/227846530-0b341502-b59e-4606-be22-04c60806e4db.png)\\n\\nè€Œä¸”åœ¨æ§åˆ¶å°ä¸­ä½ ä¸ä¼šå‘ç°ä»»ä½•é—®é¢˜ã€‚éšç€å‰åç«¯åˆ†ç¦»è¶Šæ¥è¶Šæ™®éï¼Œè¿™ä»¶äº‹å°±è¶Šæ¥è¶Šå¸¸è§ã€‚é‚£ä¹ˆå®ƒåº”è¯¥å¦‚ä½•è§£å†³å‘¢?\\n\\nåŒæºç­–ç•¥å…¨ç§°å«ã€Šæµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‹ï¼Œå®ƒæ˜¯æµè§ˆå™¨å†…å»ºçš„ä¸€ç§å®‰å…¨æœºåˆ¶ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¸è¦ä½¿ç”¨æµè§ˆå™¨è¯·æ±‚å°±èƒ½å®Œç¾è§£å†³é—®é¢˜äº†ã€‚å¯¹äºå‰ç«¯æ¥è¯´æœ€æ–¹ä¾¿çš„è‡ªç„¶å°±æ˜¯ node.js äº†ã€‚\\n\\n## åœ¨å¼€å‘ä¸­ä½¿ç”¨\\n\\n```ts\\n// mocker/index.ts\\nconst proxy = {\\n  // mocker è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£\\n  'GET /api/user': { id: 1, username: 'kenny', sex: 6 },\\n  'POST /api/user': { id: 1, username: 'kenny', sex: 6 },\\n  /** ç”¨äºå¼€å‘çš„ä»£ç†æœåŠ¡ï¼Œä¿æŒä»£ç†æœåŠ¡ host çš„å€¼ä¸ºæœ¬æœºå¼€å‘ IPï¼Œå¦åˆ™ä¸ºä»£ç†æœåŠ¡ IP */\\n  _proxy: {\\n    changeHost: false,\\n    /** ç”¨äºå¼€å‘çš„ä»£ç†æœåŠ¡ */\\n    proxy: {\\n      '/api/access/auth': 'http://10.10.101.96:8899/emt/',\\n    },\\n  }\\n};\\n\\nmodule.exports = proxy;\\n```\\n\\n## ç›®å½•æ–‡ä»¶çº¦å®š\\n\\nçº¦å®š `./mocker/index.js`<!--rehype:style=color:white;background:#00b86c;--> æ–‡ä»¶ä¸º `mock` å…¥å£æ–‡ä»¶ï¼Œä¾‹å¦‚è¿™æ ·çš„ç›®å½•ç»“æ„ï¼š\\n\\n```bash {4}\\n.\\nâ”œâ”€â”€ src\\nâ”œâ”€â”€ mocker\\nâ”‚Â Â  â””â”€â”€ index.ts       # é…ç½®ä»£ç†\\n```\\n\\nåœ¨æ­¤æ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥ç”¨äº**ä»£ç†**çš„é…ç½®\\n\\n## é…ç½®ä»£ç†\\n\\nåœ¨çº¦å®š `./mocker/index.ts`<!--rehype:style=color:white;background:#00b86c;--> æ–‡ä»¶ä¸­æ·»åŠ  `_proxy` ä»£ç†é…ç½®ï¼Œåœ¨æ­¤é…ç½®æ”¯æŒ**çƒ­æ›´æ–°**ï¼Œä¸ç”¨é‡å¯æœåŠ¡ã€‚\\n\\n```ts\\nmodule.exports = {\\n  _proxy: {\\n    proxy: {\\n      // å°†è·¯å¾„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ /user/:nameï¼‰è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼ã€‚\\n      // https://www.npmjs.com/package/path-to-regexp\\n      '/repos/(.*)': 'https://api.github.com/',\\n      '/:owner/:repo/raw/:ref/(.*)': 'http://127.0.0.1:2018',\\n      '/api/repos/(.*)': 'http://127.0.0.1:3721/'\\n    },\\n    // é‡å†™ç›®æ ‡ url è·¯å¾„ã€‚ å¯¹è±¡é”®å°†ç”¨ä½œæ­£åˆ™è¡¨è¾¾å¼ä»¥åŒ¹é…è·¯å¾„\\n    // https://github.com/jaywcjlove/mocker-api/issues/62\\n    pathRewrite: {\\n      '^/api/repos/': '/repos/',\\n    },\\n    // ä¿®æ”¹ host é€‰é¡¹ï¼Œä¸ºä»£ç†æœåŠ¡çš„ IP è®¾ä¸º false ç¦ç”¨è¿™ä¸€åŠŸèƒ½\\n    changeHost: false,\\n    // ä¿®æ”¹ http-proxy é€‰é¡¹\\n    httpProxy: {\\n      options: {\\n        ignorePath: true,\\n      },\\n      listeners: {\\n        proxyReq: function (proxyReq, req, res, options) {\\n          console.log('proxyReq');\\n        },\\n      },\\n    },    \\n  },\\n};\\n```\\n\\n## çº¦å®šä»£ç†é…ç½®\\n\\nåœ¨ `src` ç›®å½•ä¸­ä¹Ÿå­˜åœ¨çº¦å®šä»£ç†é…ç½® `src/setupProxy.js`<!--rehype:style=color:white;background:#00b86c;--> ä¸‹å»ºç«‹æ–‡ä»¶ï¼Œå¦‚æœä»£ç†é€‰é¡¹ä¸å¤Ÿçµæ´»ï¼Œæ‚¨å¯ä»¥ç›´æ¥è®¿é—® **Express** åº”ç”¨ç¨‹åºå®ä¾‹å¹¶è¿æ¥è‡ªå·±çš„ä»£ç†ä¸­é—´ä»¶ã€‚\\n\\n- ä¸æ¨èï¼š~~`src/setupProxy.js`~~ï¼Œä½†æ˜¯æ›´åŠ çµæ´»ï¼Œå¦‚æœä»£ç†é€‰é¡¹ä¸å¤Ÿçµæ´»ï¼Œå¯ç»“åˆå®ƒä¸€èµ·ä½¿ç”¨\\n- **æ¨è**ï¼šæ¨¡æ‹Ÿ API ä¸­é…ç½®ä»£ç†ï¼Œ`./mocker/index.js`<!--rehype:style=color:white;background:#00b86c;--> ä¸­é…ç½®ï¼Œæ”¯æŒçƒ­æ›´æ–°\\n\\n```bash {3}\\n.\\nâ”œâ”€â”€ src\\nâ”‚Â Â  â””â”€â”€ setupProxy.js  # é…ç½®ä»£ç†\\n```\\n\\n```bash\\n$ npm install http-proxy-middleware --save\\n$ # or\\n$ yarn add http-proxy-middleware\\n```\\n\\næ¥ä¸‹æ¥ï¼Œåˆ›å»º **`src/setupProxy.js`** å¹¶åœ¨å…¶ä¸­æ”¾ç½®ä»¥ä¸‹å†…å®¹ï¼š\\n\\n```ts\\nconst { createProxyMiddleware } = require('http-proxy-middleware');\\n\\nmodule.exports = function(app) {\\n  // ...\\n};\\n```\\n\\næ‚¨ç°åœ¨å¯ä»¥æ ¹æ®éœ€è¦æ³¨å†Œä»£ç†äº†ï¼ä¸‹é¢æ˜¯ä½¿ç”¨ä¸Šè¿° **http-proxy-middleware** çš„ç¤ºä¾‹ï¼š\\n\\n```ts\\nimport express from 'express';\\nconst { createProxyMiddleware } = require('http-proxy-middleware');\\n\\nmodule.exports = function(app: express.Application) {\\n  app.use(\\n    '/api',\\n    createProxyMiddleware({\\n      target: 'http://localhost:5000',\\n      changeOrigin: true,\\n    })\\n  );\\n};\\n```\\n\\n- æ³¨æ„ï¼šæ‚¨ä¸éœ€è¦åœ¨ä»»ä½•åœ°æ–¹å¯¼å…¥æ­¤æ–‡ä»¶ã€‚å½“æ‚¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ³¨å†Œã€‚\\n- æ³¨æ„ï¼šæ­¤æ–‡ä»¶ä»…æ”¯æŒ Node çš„ JavaScript è¯­æ³•ã€‚ç¡®ä¿åªä½¿ç”¨å—æ”¯æŒçš„è¯­è¨€åŠŸèƒ½ï¼ˆå³ä¸æ”¯æŒ~~Flow~~ã€~~ES~~æ¨¡å—ç­‰ï¼‰ã€‚\\n- æ³¨æ„ï¼šå°†è·¯å¾„ä¼ é€’ç»™ä»£ç†å‡½æ•°å…è®¸æ‚¨åœ¨è·¯å¾„ä¸Šä½¿ç”¨**é€šé…ç¬¦** å’Œ/æˆ– æ¨¡å¼åŒ¹é…ï¼Œè¿™æ¯”å¿«é€Ÿè·¯ç”±åŒ¹é…æ›´çµæ´»ã€‚\\n\\nä½¿ç”¨ `.kktprc.ts` åŒæ ·æ”¯æŒç›´æ¥è®¿é—® **Express** åº”ç”¨ç¨‹åº\\n\\n```javascript\\n// .kktprc.ts\\nimport type { WebpackConfiguration, LoaderConfOptions } from 'kkt';\\nimport express from 'express';\\nconst { createProxyMiddleware } = require('http-proxy-middleware');\\n\\nexport default {\\n  // ...\\n  overrideWebpack:(conf: WebpackConfiguration, env: 'development' | 'production', options: LoaderConfOptions | undefined)=>{\\n    conf.proxySetup = (app: express.Application) => {\\n      app.use('/api', createProxyMiddleware({\\n        target: 'http://localhost:5000',\\n        changeOrigin: true,\\n      }));\\n    };\\n    return conf;\\n  }\\n}\\n```\\næˆ–è€…ç›´æ¥ä½¿ç”¨`proxySetup`æ¥é…ç½®\\n```ts\\n// .kktprc.ts\\nimport express from 'express';\\nconst { createProxyMiddleware } = require('http-proxy-middleware');\\n\\nexport default {\\n  // ...\\n  proxySetup: (app: express.Application) => {\\n    app.use('/api', createProxyMiddleware({\\n      target: 'http://localhost:5000',\\n      changeOrigin: true,\\n    }));\\n  }\\n}\\n```\\n\\n## ä¿®æ”¹çº¦å®š mocker å…¥å£é…ç½®\\n\\nå¯ä»¥åœ¨ `.kktprc.ts`<!--rehype:style=color:white;background:#00b86c;--> ä¿®æ”¹é»˜è®¤çº¦å®š [`mock`](https://www.npmjs.com/package/mocker-api) å…¥å£é…ç½®å’Œä»£ç†\\n\\n```ts\\n// .kktprc.ts\\nimport express from 'express';\\nimport type { WebpackConfiguration, LoaderConfOptions } from 'kkt';\\nconst { createProxyMiddleware } = require('http-proxy-middleware');\\n\\nconst proxySetup = (app: express.Application) => {\\n  /** æ”¯æŒç›´æ¥è®¿é—® Express åº”ç”¨ç¨‹åº */\\n  app.use('/api', createProxyMiddleware({\\n    target: 'http://localhost:5000',\\n    changeOrigin: true,\\n  }));\\n  /** Mocker API Options */\\n  return {\\n    path: path.resolve('./mocker/index.js'),\\n    option: {\\n      proxy: {\\n        '/repos/(.*)': 'https://api.github.com/',\\n      },\\n      changeHost: false,\\n    }\\n  }\\n}\\n\\n/**\\n * ğŸš§ğŸš§ğŸš§ å¯¹äº webpack ä¸äº†è§£çš„ï¼Œä¸å»ºè®®ä½¿ç”¨æ­¤é…ç½® ğŸš§ğŸš§ğŸš§\\n */\\nexport default {\\n  // ...\\n  overrideWebpack:(conf: WebpackConfiguration, env: 'development' | 'production', options: LoaderConfOptions | undefined)=>{\\n    // ç¼–è¯‘ç”¨äºå¼€å‘æˆ–ç”Ÿäº§çš„ React åº”ç”¨ç¨‹åºæ—¶è¦ä½¿ç”¨çš„ Webpack é…ç½®\\n    // ...æ·»åŠ ä½ çš„ webpack é…ç½®\\n    conf.proxySetup = proxySetup;\\n    return conf;\\n  }\\n}\\n```\\n\\n## è´¡çŒ®è€…\\n\\næ„Ÿè°¢æ‰€æœ‰çš„è´¡çŒ®è€…ï¼Œæ¬¢è¿å¼€å‘è€…ä¸ºå¼€æºé¡¹ç›®è´¡çŒ®åŠ›é‡ã€‚\\n\\n<a href=\\\"https://github.com/uiwjs/uiw-admin/graphs/contributors\\\">\\n  <img src=\\\"https://uiwjs.github.io/uiw-admin/CONTRIBUTORS.svg\\\" />\\n</a>\\n\\n## License\\n\\nLicensed under the MIT License.\"\n  }"],"names":["components","data","source"],"sourceRoot":""}